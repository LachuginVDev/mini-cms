# Mini CMS

Простая CMS для управления постами и категориями, построенная на Laravel.

## Возможности

### Публичная часть
- Просмотр списка опубликованных постов с пагинацией
- Просмотр отдельного поста по slug
- Отображение категорий постов
- Слайдер постов на главной странице с автоматической прокруткой
- Динамический баннер на главной странице (настраивается в админ-панели)
- Комментарии к постам (требуется авторизация для добавления)
- Загрузка изображений для постов или использование внешних URL (picsum.photos)

### Личный кабинет пользователя
- Управление своими постами (создание, редактирование, удаление)
- Управление категориями (создание, редактирование, удаление)
- Загрузка изображений для постов
- Управление статусами постов (черновик, опубликован, архив)
- Профиль пользователя (изменение данных, пароля)

### Административная панель
- CRUD операции для всех постов
- Управление статусами постов
- Настройка баннера главной страницы (заголовок, подзаголовок, изображение)
- Доступ только для пользователей с ролью admin

### Аутентификация
- Регистрация и вход
- Восстановление пароля
- Роли пользователей (admin, editor, manager)

## Установка

1. Установите зависимости:
```bash
composer install
npm install
```

2. Настройте окружение:
```bash
cp .env.example .env
php artisan key:generate
```

3. Запустите MySQL через Docker:
```bash
docker-compose up -d
```

4. Выполните миграции и заполните базу тестовыми данными:
```bash
php artisan migrate
php artisan db:seed
```

5. Создайте симлинк для хранения файлов:
```bash
php artisan storage:link
```

6. Соберите фронтенд:
```bash
npm run dev
```

7. Запустите сервер:
```bash
php artisan serve
```

Приложение будет доступно по адресу `http://localhost:8000`

## Учетные данные

После выполнения `php artisan db:seed` создается администратор:
- Email: `test@example.com`
- Пароль: `secret`

## Основные маршруты

### Публичные
- `/` - Главная страница
- `/posts` - Список опубликованных постов
- `/posts/{slug}` - Просмотр поста

### Личный кабинет (требуется авторизация)
- `/user/posts` - Список постов пользователя
- `/user/posts/create` - Создание поста
- `/user/posts/{id}/edit` - Редактирование поста
- `/user/posts/{id}` - Просмотр поста пользователя
- `/user/categories` - Управление категориями
- `/profile` - Профиль пользователя

### Комментарии
- Авторизованные пользователи могут добавлять комментарии к постам
- Пользователи могут удалять свои комментарии
- Администраторы могут удалять любые комментарии
- Комментарии отображаются на странице поста `/posts/{slug}`

### Админ-панель (требуется роль admin)
- `/admin` - Админ-панель
- `/admin/posts` - Управление всеми постами
- `/admin/settings` - Настройки баннера главной страницы (заголовок, подзаголовок, изображение)

### Аутентификация
- `/login` - Вход
- `/register` - Регистрация
- `/logout` - Выход
- `/forgot-password` - Восстановление пароля

## Разработка

Для разработки запустите в двух терминалах:
```bash
# Терминал 1 - Laravel сервер
php artisan serve

# Терминал 2 - Vite с hot reload
npm run dev
```

### Тестирование
```bash
php artisan test
```

### Очистка кэша
```bash
php artisan cache:clear
php artisan config:clear
php artisan view:clear
php artisan route:clear
```

## Структура базы данных

- **users** - Пользователи (id, name, email, password, role)
- **posts** - Посты (id, title, slug, content, image, status, category_id, user_id)
- **categories** - Категории (id, title, slug)
- **comments** - Комментарии (id, post_id, user_id, content, is_approved, created_at)
- **settings** - Настройки сайта (id, key, value, created_at, updated_at)

## Технологии

- **Laravel** - PHP фреймворк
- **Laravel Breeze** - Аутентификация
- **MySQL** - База данных
- **Tailwind CSS** - CSS фреймворк
- **Vite** - Сборщик фронтенда
- **Alpine.js** - Легковесный JS фреймворк
